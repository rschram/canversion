{# templates/dokuwiki/class_overview.md.j2 #}
# {{ page_title | default(course.class_details.title | default("Class Overview")) }}

*{{ course.class_details.description | default("Welcome to the course.") }}*

## Course Details
- **Department Code:** {{ course.class_details.department_code | default('N/A') }}
- **Unit Code:** {{ course.class_details.unit_code | default('N/A') }}
- **Semester:** {{ course.class_details.semester | default('N/A') }} {{ course.class_details.year | default('N/A') }}
{% if course.class_details.course_level %}
- **Level:** {{ course.class_details.course_level }}
{% endif %}
{% if course.class_details.textbooks %}
- **Required Text(s):**
    {% for book in course.class_details.textbooks %}
      - *{{ book }}*
    {% endfor %}
{% endif %}


{{ overview_prose_md | default("Further details about the course...") }} {# This is raw Markdown prose #}


## Teaching Staff

**Coordinator:** {{ course.class_details.teaching_staff.coordinator.name | default('N/A') }}{% if course.class_details.teaching_staff.coordinator.email %} ({{ course.class_details.teaching_staff.coordinator.email }}){% endif %}  


{% if course.class_details.teaching_staff.lecturers %}
**Lecturers:**
{% for lecturer in course.class_details.teaching_staff.lecturers %}
  - {{ lecturer.name | default('N/A') }}{% if lecturer.email %} ({{ lecturer.email }}){% endif %}
{% endfor %}
{% endif %}

---
## Weekly Schedule at a Glance

| Week | Date       | Topic                               | Main Reading(s) |
|------|------------|-------------------------------------|-----------------|
{% for week in course.weeks %}
| {{ week.week_number }} | {{ week.date | default('TBA') }} | {{ week.title | default('TBA') }} | {{ week.main_reading | default('N/A') }}{% if week.other_readings %}, {{ week.other_readings | join(', ') }}{% endif %} |
{% endfor %}
{# Note: DokuWiki links like [[.weekly:week_X]] would be generated by Pandoc if the Markdown output #}
{# from this template is structured to allow Pandoc to infer relative links correctly, or #}
{# you might need a custom Pandoc filter if specific DokuWiki link syntax is essential #}
{# and not naturally produced from standard Markdown. For now, this just lists topics. #}
{# To create actual links, you'd need to know the DokuWiki pagename for each week. #}
{# If DataProcessor adds, e.g., week.dokuwiki_pagename, you could do: #}
{# | [{{ week.title | default('TBA') }}](.weekly:{{ week.dokuwiki_pagename }}) | ... #}


---
## Lecture Outlines
{% if course.lecture_outlines %}
Available lecture outlines:
{% for stem, content in course.lecture_outlines.items() %}
  - {{ stem.replace('_', ' ').replace('-', ' ').title() }} {# Again, linking would require pagenames #}
{% endfor %}
{% else %}
No lecture outlines currently available.
{% endif %}

---
## Assignments
{% if course.assignments %}
Details for assignments can be found on the Canvas site.

| Title        | Due Date   | Points    |
|--------------|------------|-----------|
{% for assign in course.assignments %}
| {{ assign.title | default('N/A') }} | {{ assign.due_date | default('TBA') }} | {{ assign.points | default('N/A') }} |
{% endfor %}
{% else %}
No assignments listed yet. Check Canvas for details.
{% endif %}

{# If citations are used anywhere in this template or in overview_prose_md, #}
{# Pandoc will create a bibliography section if --citeproc is used. #}
{# You can add a specific ## References heading if you want it consistently. #}
## References